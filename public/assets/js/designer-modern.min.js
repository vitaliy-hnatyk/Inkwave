function checkMobileDevice() {
    var e = !1;
    return (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0, 4))) && (e = !0), e
}

!function (e, t) {
    var i = {
        init: function () {
            this.mainBar(), this.mainMenu(), this.clickOutside(), this.sideBar.init(), this.toolBar.init(), this.showPopup(), this.actionPopupShare(), this.actionShowPreview(), this.responsive(), this.checkDevice()
        }, checkDevice: function () {
            var i = navigator.userAgent;
            if (i.indexOf("Android") >= 0 && e("body").addClass("android"), -1 != i.indexOf("Trident") && -1 != i.indexOf("rv:11")) e("body").addClass("ie"); else if (-1 != navigator.userAgent.indexOf("Firefox")) e("body").addClass("firefox"); else if (-1 != navigator.userAgent.indexOf("Opera")) e("body").addClass("Opera"); else if (-1 != navigator.userAgent.indexOf("Chrome")) e("body").addClass("chrome"); else if (-1 != navigator.userAgent.indexOf("Safari") && -1 == navigator.userAgent.indexOf("CriOS")) {
                e("body").addClass("safari");
                var n = t.devicePixelRatio || 1;
                (1125 == (s = {
                    width: t.screen.width * n,
                    height: t.screen.height * n
                }).width && 2436 === s.height || 1242 == s.width && 2688 === s.height || 828 == s.width && 1792 === s.height) && e("body").addClass("iphonex")
            }
            if (-1 != navigator.userAgent.indexOf("CriOS") && -1 != navigator.userAgent.indexOf("iPhone")) {
                var s;
                n = t.devicePixelRatio || 1;
                (1125 == (s = {
                    width: t.screen.width * n,
                    height: t.screen.height * n
                }).width && 2436 === s.height || 1242 == s.width && 2688 === s.height || 828 == s.width && 1792 === s.height) && e("body").addClass("chrome-iphonex")
            }
        }, clickOutside: function () {
            var t = e(".nbd-main-menu .menu-item,.nbd-dropdown"), i = e(".nbd-color-palette");
            e(document).on("click", (function (n) {
                0 != t.has(n.target).length || t.is(n.target) || (t.removeClass("active"), checkMobileDevice() && e(".main-toolbar").removeClass("overflow-hidden")), 0 != i.has(n.target).length || i.is(n.target) || e(".nbd-show-color-palette span").is(n.target) || (i.removeClass("show"), e(".nbd-show-color-palette").removeClass("nbd-show"))
            }))
        }, mainMenu: function () {
            var t = e(".nbd-main-menu .menu-item"), i = e(".nbd-dropdown:not(.button-crop-mode)"),
                n = (e(".nbd-main-menu .menu-item .sub-menu"), e(".nbd-sub-dropdown"), e(".nbd-main-menu .menu-item .sub-menu-item"), e(".nbd-close-sub-menu")),
                s = e(".nbd-main-menu .sub-menu .hover-menu");
            t.on("click touch", (function (i) {
                var n = e(i.target);
                t.not(this).removeClass("active"), (n.hasClass("sub-menu-item") || n.parents(".sub-menu-item").length || !n.hasClass("sub-menu") && !n.parents(".sub-menu").length) && e(this).find(".sub-menu").length && (e(this).hasClass("active") ? (e(this).removeClass("active"), checkMobileDevice() && "true" == e(this).attr("data-range") && e(this).closest(".main-toolbar").removeClass("overflow-hidden")) : (t.removeClass("active"), e(this).addClass("active"), checkMobileDevice() && "true" == e(this).attr("data-range") && e(this).closest(".main-toolbar").addClass("overflow-hidden")))
            })), i.on("click", (function () {
                e(this).find(".nbd-sub-dropdown").length && (e(this).hasClass("active") ? e(this).removeClass("active") : (e(this).addClass("active"), e(this).find(".nbd-perfect-scroll").perfectScrollbar("update")))
            })), n.on("click", (function () {
                t.removeClass("active")
            })), s.on({
                mouseenter: function () {
                    checkMobileDevice() || e(this).addClass("show")
                }, mouseleave: function () {
                    checkMobileDevice() || e(this).removeClass("show")
                }, click: function (t) {
                    if (e(this).hasClass("show") ? (e(this).removeClass("show"), checkMobileDevice() && e(this).find(".hover-sub-menu-item").slideUp()) : (e(this).siblings().removeClass("show"), e(this).addClass("show"), checkMobileDevice() && e(this).find(".hover-sub-menu-item").slideDown()), 0 == e(this).find(".hover-sub-menu-item").has(event.target).length && !e(this).find(".hover-sub-menu-item").is(t.target)) return !1
                }
            }), checkMobileDevice() && s.find(" > i").removeClass("rotate-90")
        }, mainBar: function () {
            e(".nbd-main-bar")
        }, sideBar: {
            init: function () {
                this.tab(), this.tabPhto.init(), this.tabProductTemplate(), this.tabElement.init()
            }, tab: function () {
                var i = e(".nbd-sidebar .tabs-nav .tab"), n = e(".nbd-sidebar .tabs-content .tab"),
                    s = e(".nbd-sidebar .tabs-nav .tab.layerTab");
                e(t).width();
                checkMobileDevice() ? (n.filter(".active").prevAll().addClass("left"), n.filter(".active").nextAll().addClass("right"), i.filter(".tab-first").removeClass("active"), e(".nbd-sidebar .tabs-content").addClass("nbd-hidden")) : (n.filter(".active").prevAll().addClass("before"), n.filter(".active").nextAll().addClass("after")), i.on("click", (function () {
                    var t = e(this).index(), a = "tab-" + (t = s.length ? parseInt(t) - 1 : parseInt(t));
                    checkMobileDevice() && (e(this).hasClass("layerTab") ? (e(".nbd-workspace .main").addClass("active"), e(".nbd-sidebar .tabs-content").removeClass("active"), e(".nbd-sidebar .tabs-content").addClass("nbd-prevent-click")) : (e(".nbd-workspace .main").removeClass("active"), e(".nbd-sidebar .tabs-content").addClass("active"), e(".nbd-sidebar .tabs-content").removeClass("nbd-hidden"))), e(this).parent().removeAttr("data-tab").attr("data-tab", a), i.removeClass("active"), e(this).addClass("active"), n.removeClass("before after left right"), n.each((function (i) {
                        t == (i += 1) ? (e(this).addClass("active"), checkMobileDevice() ? (e(this).prevAll().addClass("left"), e(this).nextAll().addClass("right")) : (e(this).prevAll().addClass("before"), e(this).nextAll().addClass("after"))) : e(this).removeClass("active")
                    }))
                }))
            }, tabPhto: {
                init: function () {
                    e("#tab-photo .nbd-items-dropdown").nbdDropdown({getServer: {}, itemInRow: 3, itemDistance: 20});
                    var t = e(".type-upload .nbd-term .nbd-checkbox input"),
                        i = e(".nbd-sidebar .type-upload .form-upload"), n = !1;
                    t.on("click", (function () {
                        var t = e(this).closest(".type-upload");
                        e(this).is(":checked") ? (t.addClass("accept"), n = !0) : (t.removeClass("accept"), n = !1)
                    })), i.on("click", (function () {
                        if (!n) return !1
                    }))
                }, initPositionCate: function () {
                    e(".nbd-sidebar #tab-photo .categories .category").each((function () {
                        var t = e(this).index(), i = t % 3, n = parseInt(t / 3);
                        e(this).css({left: 115 * i + "px", top: 132 * n + "px"})
                    }))
                }
            }, tabProductTemplate: function () {
                e(".nbd-sidebar #tab-product-template"), e(".nbd-sidebar #tab-product .nbd-product"), e(".nbd-sidebar #tab-template"), e(".nbd-sidebar #tab-template .close-template"), e(".nbd-sidebar #tab-product .nbd-product .nbd-product-img"), e(".nbd-sidebar #tab-template .nbd-items-dropdown .main-items item");
                e("#tab-template .nbd-items-dropdown").nbdDropdown({getServer: {}, itemInRow: 3, itemDistance: 20})
            }, tabElement: {
                init: function () {
                    e("#tab-element .nbd-items-dropdown").nbdDropdown({getServer: {}, itemInRow: 3, itemDistance: 20})
                }
            }
        }, toolBar: {
            init: function () {
                this.toolBarImage()
            }, toolBarImage: function () {
                var t = e(".nbd-toolbar .toolbar-image .filter-scroll"),
                    i = e(".nbd-toolbar .toolbar-image .filter-scroll.scrollRight"),
                    n = e(".nbd-toolbar .toolbar-image .filter-scroll.scrollLeft"),
                    s = e(".nbd-toolbar .toolbar-image .main-presets .preset");
                e(".nbd-toolbar .toolbar-image .main-ranges .range"), e(".nbd-toolbar .toolbar-image .main-ranges .range .slide-input");
                t.on("click", (function () {
                    var t = s.css("transform").split(/[()]/)[1], a = parseInt(t.split(",")[4]), o = 0,
                        r = 3 * s.outerWidth(), d = -(parseInt(s.length / 3) - 1) * r;
                    if (e(this).hasClass("scrollLeft")) {
                        o = a + r;
                        if (a >= 0) return e(this).filter(".scrollLeft").addClass("disable"), !1;
                        i.hasClass("disable") && i.removeClass("disable"), s.css({transform: "translateX(" + o + "px)"})
                    } else {
                        if (!e(this).hasClass("scrollRight")) return !1;
                        o = a - r;
                        if (a <= d) return e(this).filter(".scrollRight").addClass("disable"), !1;
                        n.hasClass("disable") && n.removeClass("disable"), s.css({transform: "translateX(" + o + "px)"})
                    }
                })), s.on("click", (function () {
                    s.removeClass("active"), e(this).addClass("active")
                }))
            }
        }, showPopup: function () {
            e(".nbd-show-popup-share").on("click", (function () {
                e(".nbd-popup.popup-share").nbShowPopup(), e(".nbd-popup.popup-share").find(".overlay-main").addClass("active")
            })), e(".nbd-show-popup-fileType").on("click", (function () {
                e(".nbd-popup.popup-fileType").nbShowPopup()
            })), e(".nbd-term .term-read").on("click", (function () {
                e(".nbd-popup.popup-term").nbShowPopup()
            })), e(".nbd-sidebar .keyboard-shortcuts i").on("click", (function () {
                e(".nbd-popup.popup-keyboard").nbShowPopup(), e(".nbd-popup.popup-keyboard .nbd-tabs").nbTab()
            })), e(".nbd-main-bar #save-template").on("click", (function () {
                e(".nbd-popup.popup-template").nbShowPopup()
            })), e(".nbd-popup-trigger").on("click", (function () {
                var e = jQuery(this).attr("data-popup");
                jQuery("." + e).nbShowPopup()
            }))
        }, actionPopupShare: function () {
            var t = e(".popup-share .socials .social");
            t.on("click", (function () {
                t.removeClass("active"), e(this).hasClass("active") || e(this).addClass("active")
            }))
        }, actionShowPreview: function () {
            var t = e(".nbd-sidebar #tab-product .nbd-product .product-more-info"),
                i = e(".nbd-sidebar .nbd-sidebar-preview");
            t.on("click", (function () {
                i.hasClass("show") ? i.removeClass("show") : i.addClass("show")
            })), i.find(".close-preview").on("click", (function () {
                i.removeClass("show")
            }))
        }, responsive: function () {
            if (checkMobileDevice()) {
                var t = e(".nbd-sidebar .main-tabs"),
                    i = (e(".nbd-sidebar .main-tabs .tab"), e(".nbd-main-bar .menu-mobile")),
                    n = (e(".nbd-sidebar .tabs-content .tab"), e(".nbd-sidebar .tabs-content .tab .tab-main")),
                    s = function () {
                        var t = !1;
                        e("body").hasClass("nbd-modern-rtl") && (t = !0);
                        return t
                    }();
                i.on("click", (function () {
                    var t = e(".nbd-main-bar .nbd-main-menu");
                    e(this).hasClass("icon-nbd-menu") ? (e(this).removeClass("icon-nbd-menu").addClass("icon-nbd-clear"), t.each((function (t) {
                        e(this).hasClass("menu-left") ? e(this).show() : e(this).hide()
                    }))) : (e(this).removeClass("icon-nbd-clear").addClass("icon-nbd-menu"), t.each((function (t) {
                        e(this).hasClass("menu-left") ? e(this).hide() : e(this).show()
                    })))
                })), n.on({
                    swiperight: function () {
                        var i = e(this).closest(".tab"), n = i.prev().index(), a = t.scrollLeft(),
                            o = e(".nbd-sidebar .main-tabs .tab").eq(n - 1).width();
                        i.hasClass("tab-first") || (s ? t.animate({scrollLeft: a + o}, 300) : t.animate({scrollLeft: a - o}, 300), e(".nbd-sidebar .main-tabs .tab").eq(n - 1).triggerHandler("click"))
                    }, swipeleft: function () {
                        var i = e(this).closest(".tab"), n = i.next().index(), a = t.scrollLeft(),
                            o = e(".nbd-sidebar .main-tabs .tab").eq(n - 1).width();
                        i.hasClass("tab-last") || (s ? t.animate({scrollLeft: a - o}, 300) : t.animate({scrollLeft: a + o}, 300), e(".nbd-sidebar .main-tabs .tab").eq(n - 1).triggerHandler("click"))
                    }
                })
            }
        }
    };
    e.fn.nbdDropdown = function (t) {
        var i = this, n = e.extend({}, e.fn.nbdDropdown.default, t);
        return this.initPositionItem = function (t, i, n, s) {
            var a = t.width() / n, o = i.height() + s;
            i.show(), i.each((function () {
                var t = e(this).index(), i = t % n, s = parseInt(t / n);
                e(this).css({left: a * i + "px", top: o * s + "px"})
            }))
        }, this.each((function () {
            var t = e(this).find(".items"), s = e(this).find(".item"), a = e(this).find(".main-items"),
                o = e(this).find(".result-loaded"), r = e(this).find(".nbdesigner-gallery"),
                d = e(this).find(".info-support"), l = e(this).closest(".tab-scroll"),
                c = e(this).find(".result-loaded .content-item"), h = s.length, b = parseInt(h / n.itemInRow),
                u = s.outerHeight() + n.itemDistance;
            e(this).find(".loading-photo");
            i.initPositionItem(t, s, n.itemInRow, n.itemDistance), a.css({height: b * u + "px"}), s.on("click", (function () {
                var h = e(this).index(), b = parseInt(h / n.itemInRow) + 1, p = e(this).outerWidth(),
                    m = e(this).find(".item-name").text(), f = e(this).attr("data-type"), v = e(this).attr("data-api");
                if ("webcam" == f) return e(".nbd-popup.popup-webcam").addClass("nb-show"), !1;
                if (d.find("span").text(m), a.css({height: b * (u - 15) + "px"}), a.find(".pointer").css({left: p * (h % n.itemInRow + 1) - p / 2 + "px"}), "false" != v) {
                    if (o.removeClass("overflow-visible"), a.hasClass("active-expanded")) e(this).css({opacity: "1"}), e(this).siblings().css({opacity: "1"}), a.removeClass("active-expanded"), i.initPositionItem(t, s, n.itemInRow, n.itemDistance), o.hide(), o.removeClass("loaded"), r.hide(), c.hide(); else {
                        e(this).siblings().css({opacity: "0.5"});
                        g = t.find(".item:nth-child(" + b * n.itemInRow + ")").nextAll();
                        e(g).each((function () {
                            e(this).hide()
                        })), o.show(), r.show(), a.addClass("active-expanded"), o.addClass("loaded")
                    }
                    return d.find(".close-result-loaded").on("click", (function () {
                        a.removeClass("active-expanded"), i.initPositionItem(t, s, n.itemInRow, n.itemDistance), o.hide(), s.show().css({opacity: "1"}), o.removeClass("loaded"), l.scrollTop(0), d.removeClass("slideInDown animated show")
                    })), !1
                }
                if (o.show().addClass("overflow-visible"), c.filter((function (t) {
                    return e(this).attr("data-type") === f
                })).show().find('input[type="text"]').first().focus(), r.hide(), a.hasClass("active-expanded")) e(this).css({opacity: "1"}), e(this).siblings().css({opacity: "1"}), a.removeClass("active-expanded"), i.initPositionItem(t, s, n.itemInRow, n.itemDistance), o.hide(), c.hide(), o.removeClass("loaded"); else {
                    e(this).siblings().css({opacity: "0.5"}), a.addClass("active-expanded"), o.addClass("loaded");
                    var g = t.find(".item:nth-child(" + b * n.itemInRow + ")").nextAll();
                    e(g).each((function () {
                        e(this).hide()
                    }))
                }
                d.find(".close-result-loaded").on("click", (function () {
                    a.removeClass("active-expanded"), i.initPositionItem(t, s, n.itemInRow, n.itemDistance), o.hide(), c.hide(), s.show().css({opacity: "1"}), o.removeClass("loaded"), l.scrollTop(0), d.removeClass("slideInDown animated show")
                }))
            }))
        }))
    }, e.fn.nbdColorPalette = function (t) {
        e.extend({}, e.fn.nbdColorPalette.defaults, t);
        return this.each((function () {
            var t = e("#nbd-color-palette");
            e(this).on("click", (function (i) {
                var n = e(this).offset().left, s = e(".nbd-toolbar").offset().left;
                e(".nbd-main-menu .menu-item").removeClass("active"), t.css({left: n - s + "px"}), "rtl" == NBDESIGNCONFIG.lang_rtl && t.css({left: n - s - t.width() + 28 + "px"}), e(this).hasClass("nbd-show") ? (t.removeClass("show"), e(this).removeClass("nbd-show")) : (e(".nbd-show-color-palette").removeClass("nbd-show"), t.addClass("show"), e(this).addClass("nbd-show"))
            }))
        }))
    }, e.fn.nbTab = function () {
        return this.each((function () {
            var t = e(this).find(".nbd-tab"), i = e(".nbd-tab-contents .nbd-tab-content");
            t.on("click", (function () {
                var n = e(this).attr("data-tab");
                t.removeClass("active"), e(this).addClass("active"), i.removeClass("active"), e(".nbd-tab-contents #" + n).addClass("active"), e(".nbd-tab-contents .tab-scroll").stop().animate({scrollTop: 0}, 100)
            }))
        }))
    }, e.fn.nbShowPopup = function () {
        return this.each((function () {
            var t = this, i = e(this).find(".overlay-popup, .close-popup");
            e(this).hasClass("nb-show") || e(this).addClass("nb-show"), i.on("click", (function () {
                e(t).removeClass("nb-show")
            }))
        }))
    }, e.fn.nbToasts = function () {
        return this.each((function () {
            var t = e(this).find(".toast"), i = e(this);
            e(this).addClass("nbd-show"), t.addClass("nbSlideInUp"), t.find(".nbd-close-toast").on("click", (function () {
                t.removeClass("nbSlideInUp").addClass("nbSlideInDown"), t.bind("webkitAnimationEnd oanimationend msAnimationEnd animationend", (function () {
                    i.removeClass("nbd-show")
                }))
            })), n && clearTimeout(n);
            var n = setTimeout((function () {
                i.hasClass("nbd-show") ? (t.removeClass("nbSlideInUp").addClass("nbSlideInDown"), t.bind("webkitAnimationEnd oanimationend msAnimationEnd animationend", (function () {
                    i.removeClass("nbd-show")
                }))) : clearTimeout(n)
            }), 3e3)
        }))
    }, e.fn.nbWarning = function (t) {
        return this.each((function () {
            var i = e(this).find(".item");
            if (e(this).addClass("nbd-show"), i.length < 3) {
                var n = e('<div class="item animate300 animated nbScaleOut main-warning nbd-show"><i class="icon-nbd icon-nbd-baseline-warning warning"></i><span class="title-warning">' + t + '</span><i class="icon-nbd icon-nbd-clear close-warning"></i></div>'),
                    s = n.find(".close-warning");
                e(this).append(n), s.on("click", (function () {
                    n.removeClass("nbScaleOut").addClass("nbScaleIn"), n.bind("webkitAnimationEnd oanimationend msAnimationEnd animationend", (function () {
                        n.remove()
                    }))
                })), setTimeout((function () {
                    n.removeClass("nbScaleOut").addClass("nbScaleIn"), n.bind("webkitAnimationEnd oanimationend msAnimationEnd animationend", (function () {
                        n.remove()
                    }))
                }), 1e4)
            }
        }))
    }, e.fn.nbSimpleSlider = function () {
        return this.each((function () {
            var t = e(this).find(".next"), i = e(this).find(".prev"), n = e(this).find(".items"),
                s = e(this).find(".item").length, a = (e(this), 0);

            function o() {
                t.removeClass("nbd-disabled"), i.removeClass("nbd-disabled"), n.css("transform", "translateX(" + -a * n.width() + "px)")
            }

            i.on("click", (function () {
                a = Math.max(a - 1, 0), o(), 0 == a && i.addClass("nbd-disabled")
            })), t.on("click", (function () {
                a = Math.min(a + 1, s - 1), o(), a == s - 1 && t.addClass("nbd-disabled")
            }))
        }))
    }, e.fn.nbdRuler = function (e) {
        var i = this, n = "http://www.w3.org/2000/svg";

        function s() {
            return "vertical" === rulerConfig.layout
        }

        function a(e) {
            rulerConfig.divisions.forEach((function (t) {
                !function (e, t) {
                    for (var i = 0; i <= rulerConfig.size; i += t.pixelGap) {
                        var n = r(i, t);
                        e.appendChild(n)
                    }
                }(e, t)
            })), function (e, t) {
                for (var i = 0, n = 0; n <= rulerConfig.size; n += t.pixelGap) {
                    var s = o(n, t, i, 0 == n ? " " + t.unit : "");
                    e.appendChild(s), i++
                }
            }(e, rulerConfig.text), function (e, i) {
                var a, o, r, d, l = t.document.createElementNS(n, "rect");
                s() ? (a = "y", o = "x", r = "width", d = "height") : (a = "x", o = "y", r = "height", d = "width");
                var c = s() ? i.cursorPos.y : i.cursorPos.x, h = s() ? "rulez-indicator-ver" : "rulez-indicator-hoz";
                l.setAttribute("class", h), l.setAttribute(a, 0), l.setAttribute(o, c), l.setAttribute(r, .75 * i.divisions[i.divisions.length - 1].lineLength), l.setAttribute(d, 1), l.setAttribute("fill", "red"), e.appendChild(l)
            }(e, rulerConfig)
        }

        function o(e, i, a, o) {
            var r, d, l = t.document.createElementNS(n, "text"), c = i.offset;
            l.setAttribute("class", "rulez-text"), s() ? (r = "y", d = "x") : (r = "x", d = "y");
            var h = s() ? "rotate(90 " + c + " " + (e + 2) + ")" : "rotate(0 " + (e + 2) + " " + c + ")";
            return l.origPos = e, l.origPosAttribute = r, l.setAttribute(r, e + 2), l.setAttribute(d, c), l.setAttribute("transform", h), l.textContent = a * (s() ? i.multiplesY : i.multiplesX) + o, l
        }

        function r(e, i) {
            var a, o, r, d, l = t.document.createElementNS(n, "rect");
            return s() ? (a = "y", o = "x", r = "width", d = "height") : (a = "x", o = "y", r = "height", d = "width"), l.setAttribute("class", "rulez-rect"), l.setAttribute(a, e), l.setAttribute(o, 0), l.setAttribute(r, i.lineLength), l.setAttribute(d, .5), l
        }

        return this.update = function (e) {
            this.rulerConfig.config = JSON.parse(JSON.stringify(e.config)), this.rulerConfig.zoomRatio = JSON.parse(JSON.stringify(e.zoomRatio)), this.render()
        }, this.updateCursorIndicator = function (e) {
            this.rulerConfig.cursorPos = JSON.parse(JSON.stringify(e));
            var t = this.find(".rulez-indicator-hoz"), i = this.find(".rulez-indicator-ver");
            t.attr("x", e.x), i.attr("y", e.y)
        }, this.render = function () {
            this.rulerConfig = e || this.rulerConfig;
            var s = t.document.createElementNS(n, "g");
            rulerConfig = function (e) {
                var t = e.config.cwidth * e.zoomRatio, n = e.config.cheight * e.zoomRatio, s = 100, a = [], o = 1,
                    r = 1;
                if ("vertical" === e.layout) {
                    var d = parseFloat(e.config.pHeight);
                    if (d > 1) for (; 0 != Math.floor(d / 10);) d /= 10, r *= 10; else for (; d > 1;) d *= 10, r /= 10;
                    s = n / d
                } else {
                    var l = parseFloat(e.config.pWidth);
                    if (l > 1) for (; 0 != Math.floor(l / 10);) l /= 10, o *= 10; else for (; l > 1;) l *= 10, o /= 10;
                    s = t / l
                }
                return a = s / 10 > 10 ? [{pixelGap: s / 50, lineLength: 5}, {
                    pixelGap: s / 10,
                    lineLength: 10
                }, {pixelGap: s, lineLength: 20}] : [{pixelGap: s / 10, lineLength: 5}, {
                    pixelGap: s,
                    lineLength: 15
                }], {
                    width: "vertical" === e.layout ? i.width() : t,
                    height: "horizontal" === e.layout ? i.height() : n,
                    layout: e.layout,
                    alignment: "top",
                    size: "vertical" === e.layout ? n : t,
                    divisions: a,
                    text: {offset: 27, pixelGap: s, multiplesX: o, multiplesY: r, unit: e.unit},
                    cursorPos: {x: 0, y: 0}
                }
            }(this.rulerConfig), a(s), i.html("").append(s)
        }, this
    }, t.initModernLayout = function () {
        t.modern = i, i.init(), e(".nbd-tooltip-hover").tooltipster({
            side: "top",
            theme: "tooltipster-borderless"
        }), e(".nbd-tooltip-hover-left").tooltipster({
            side: "left",
            theme: "tooltipster-borderless"
        }), e(".nbd-tooltip-hover-right").tooltipster({
            side: "right",
            theme: "tooltipster-borderless"
        }), e("#toolbar-font-size-dropdown,#toolbar-font-familly-dropdown, .nbd-sidebar .tab-scroll,.nbd-popup .tab-scroll, .nbd-perfect-scroll").perfectScrollbar(), e(".nbd-show-color-palette").nbdColorPalette();
        var n = jQuery(t).width();
        n > 767 && n <= 1024 && (jQuery(".main-tabs .tab").on("click", (function () {
            jQuery(".nbd-sidebar").addClass("is_open")
        })), jQuery(".hide-tablet").on("click", (function () {
            jQuery(".nbd-sidebar").removeClass("is_open")
        }))), jQuery(".popup-webcam .close-popup, .popup-webcam .overlay-popup").on("click", (function () {
            jQuery(".popup-webcam").removeClass("nb-show")
        })), jQuery(".nbd-stages-nav-toggle").on("click", (function () {
            jQuery(".nbd-stages-nav").toggleClass("toggle-down"), document.getElementById("toggle-direction").classList.toggle("toggle-down")
        }))
    }
}(jQuery, window), window.wp = window.wp || {}, wp.template = _.memoize((function (e) {
    var t, i = {
        evaluate: /<#([\s\S]+?)#>/g,
        interpolate: /\{\{\{([\s\S]+?)\}\}\}/g,
        escape: /\{\{([^\}]+?)\}\}(?!\})/g,
        variable: "data"
    };
    return function (n) {
        return (t = t || _.template($("#tmpl-" + e).html(), i))(n)
    }
}));